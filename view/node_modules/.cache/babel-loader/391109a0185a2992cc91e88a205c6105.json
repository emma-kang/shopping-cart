{"ast":null,"code":"import _defineProperty from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/yuseon/dev/js/shoppingCart/view/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yuseon/dev/js/shoppingCart/view/src/Admin.js\";\n\n/** Administrator mode page */\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar Admin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Admin, _Component);\n\n  function Admin(props) {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this, props));\n\n    _this.getProductData = function () {\n      fetch('http://localhost:8080/api/products').then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this.setState({\n          pdData: data\n        });\n      });\n    };\n\n    _this.addProduct = function (e) {\n      axios.post('http://localhost:8080/api/products', {\n        id: _this.state.form.pdId,\n        name: _this.state.form.pdName,\n        picURL: _this.state.form.pdUrl,\n        quantity: _this.state.form.qty,\n        price: _this.state.form.price,\n        description: _this.state.form.desc\n      }).then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        console.log(err);\n      });\n      e.preventDefault();\n    };\n\n    _this.updateProduct = function () {\n      // using params as ObjectId of MongoDB \n      axios.put(\"http://localhost:8080/api/products/\".concat(_this.state.objId), {\n        id: _this.state.form.pdId,\n        name: _this.state.form.pdName,\n        picURL: _this.state.form.pdUrl,\n        quantity: _this.state.form.qty,\n        price: _this.state.form.price,\n        description: _this.state.form.desc\n      }).then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.delProduct = function (product) {\n      axios.delete(\"http://localhost:8080/api/products/\".concat(product)).then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.handleChange = function (e) {\n      var target = e.target;\n      var name = target.name;\n      var value = target.value; // ...this.state.form to prevent warning controlled or uncontrolled text input\n\n      _this.setState({\n        form: _objectSpread({}, _this.state.form, _defineProperty({}, name, value))\n      });\n    };\n\n    _this.handleClick = function (e) {\n      var obj = e.target.value; // find data which is same with object Id\n\n      var result = _this.state.pdData.filter(function (el) {\n        return el._id === obj;\n      }); // set state as the result values \n\n\n      _this.setState({\n        objId: result[0]._id,\n        form: {\n          pdId: result[0].id,\n          pdName: result[0].name,\n          pdUrl: result[0].picURL,\n          qty: result[0].quantity,\n          price: result[0].price,\n          desc: result[0].description\n        }\n      });\n\n      console.log(_this.state.form.pdId);\n    };\n\n    _this.state = {\n      pdData: [],\n      objId: '',\n      form: {\n        pdId: '',\n        pdName: '',\n        pdUrl: '',\n        qty: 0,\n        price: 0,\n        desc: ''\n      },\n      intervalIsSet: false\n    };\n    _this.getProductData = _this.getProductData.bind(_assertThisInitialized(_this));\n    _this.addProduct = _this.addProduct.bind(_assertThisInitialized(_this));\n    _this.updateProduct = _this.updateProduct.bind(_assertThisInitialized(_this));\n    _this.delProduct = _this.delProduct.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  } // fetch all existing data \n\n\n  _createClass(Admin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getProductData();\n\n      if (!this.state.intervalIsSet) {\n        var interval = setInterval(this.getProductData, 1000);\n        this.setState({\n          intervalIsSet: interval\n        });\n      }\n    } // always kill a process everytime we are done using it \n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.intervalIsSet) {\n        clearInterval(this.state.intervalIsSet);\n        this.setState({\n          intervalIsSet: null\n        });\n      }\n    } // get all Data from database \n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var pdList = this.state.pdData.map(function (el, index) {\n        return React.createElement(\"div\", {\n          className: \"btn-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"key=\", index, \">\", React.createElement(\"div\", {\n          className: \"list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"ID: \", el.id, \", Name: \", el.name, \" \"), React.createElement(\"span\", {\n          className: \"btn-group mx-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-secondary\",\n          value: el._id,\n          onClick: _this2.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Select\"), React.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: function onClick() {\n            return _this2.delProduct(el._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \"Delete\")));\n      });\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.addProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Product Id\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        \"aria-describedby\": \"id-help\",\n        name: \"pdId\",\n        value: this.state.form.pdId,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"small\", {\n        id: \"id-help\",\n        className: \"form-text text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Must be integer\")), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Product Name\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"pdName\",\n        value: this.state.form.pdName,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-pic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Photo URL\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"pdUrl\",\n        value: this.state.form.pdUrl,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-qty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Qty\"), React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"qty\",\n        value: this.state.form.qty,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"price\",\n        value: this.state.form.price,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"product-desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"desc\",\n        value: this.state.form.desc,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Add\"), React.createElement(\"button\", {\n        className: \"btn btn-info ml-2\",\n        onClick: this.updateProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Update\"))), React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, pdList)));\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport { Admin as default };","map":{"version":3,"sources":["/Users/yuseon/dev/js/shoppingCart/view/src/Admin.js"],"names":["React","Component","axios","Admin","props","getProductData","fetch","then","res","json","data","setState","pdData","addProduct","e","post","id","state","form","pdId","name","pdName","picURL","pdUrl","quantity","qty","price","description","desc","console","log","catch","err","preventDefault","updateProduct","put","objId","delProduct","product","delete","handleChange","target","value","handleClick","obj","result","filter","el","_id","intervalIsSet","bind","interval","setInterval","clearInterval","pdList","map","index"],"mappings":"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","sourcesContent":["/** Administrator mode page */\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nexport default class Admin extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            pdData: [],\n            objId: '',\n            form: {\n                pdId: '',\n                pdName: '',\n                pdUrl: '',\n                qty: 0,\n                price: 0,\n                desc: ''\n            },\n            intervalIsSet: false\n        }\n\n        this.getProductData = this.getProductData.bind(this);\n        this.addProduct = this.addProduct.bind(this);\n        this.updateProduct = this.updateProduct.bind(this);\n        this.delProduct = this.delProduct.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    // fetch all existing data \n    componentDidMount() {\n        this.getProductData();\n        if(!this.state.intervalIsSet) {\n            let interval = setInterval(this.getProductData, 1000);\n            this.setState({\n                intervalIsSet: interval\n            });\n        }\n    }\n\n    // always kill a process everytime we are done using it \n    componentWillUnmount() {\n        if(this.state.intervalIsSet){\n            clearInterval(this.state.intervalIsSet);\n            this.setState({\n                intervalIsSet: null\n            });\n        }\n    }\n\n    // get all Data from database \n    getProductData = () => {\n        fetch('http://localhost:8080/api/products')\n        .then(res => res.json())\n        .then(data => {\n            this.setState({\n                pdData: data\n            })\n        });\n    };\n\n    // add Product data to databasse\n    addProduct = (e) => {\n      axios.post('http://localhost:8080/api/products', {\n          id: this.state.form.pdId,\n          name: this.state.form.pdName,\n          picURL: this.state.form.pdUrl,\n          quantity: this.state.form.qty,\n          price: this.state.form.price,\n          description: this.state.form.desc\n      }).then((res) => {\n          console.log(res);\n      }).catch((err) => {\n          console.log(err);\n      })\n      \n      e.preventDefault();\n    }\n    \n    // update Product data to database\n    updateProduct = () => {\n        // using params as ObjectId of MongoDB \n        axios.put(`http://localhost:8080/api/products/${this.state.objId}`, {\n                id: this.state.form.pdId,\n                name: this.state.form.pdName,\n                picURL: this.state.form.pdUrl,\n                quantity: this.state.form.qty,\n                price: this.state.form.price,\n                description: this.state.form.desc\n        }).then((res) => {\n            console.log(res);\n        }).catch((err) => {\n            console.log(err);\n        })\n    }\n\n    // delete Product data from database\n    delProduct = (product) => {\n        axios.delete(`http://localhost:8080/api/products/${product}`)\n        .then((res) => {\n            console.log(res);\n        }).catch((err) => {\n            console.log(err);\n        })\n    }\n\n    handleChange = (e) => {\n        const target = e.target;\n        const name = target.name; \n        const value = target.value;\n        \n        // ...this.state.form to prevent warning controlled or uncontrolled text input\n        this.setState({\n            form: {\n                ...this.state.form,\n                [name]: value \n            }\n        });\n    } \n\n    handleClick = (e) => {\n        const obj = e.target.value;\n        // find data which is same with object Id\n        let result = this.state.pdData.filter((el) => el._id === obj);\n\n        // set state as the result values \n        this.setState({\n                objId: result[0]._id,\n                form: {\n                    pdId: result[0].id,\n                    pdName: result[0].name,\n                    pdUrl: result[0].picURL,\n                    qty: result[0].quantity,\n                    price: result[0].price,\n                    desc: result[0].description\n                }\n        })\n\n        console.log(this.state.form.pdId);\n\n    }\n\n    render() {\n        let pdList = this.state.pdData.map((el, index) => {\n            return <div className=\"btn-container\">key={index}><div className=\"list\">ID: {el.id}, Name: {el.name} </div>\n                <span className=\"btn-group mx-0\"><button className=\"btn btn-secondary\" value={el._id} onClick={this.handleClick}>Select</button>\n                <button className=\"btn btn-danger\" onClick={() => this.delProduct(el._id)}>Delete</button></span>\n                </div>\n        });\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-6\">\n                        {/* input name and state key name should be same  */}\n                        <form onSubmit={this.addProduct}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-id\">Product Id</label>\n                                <input type=\"text\" className=\"form-control\" aria-describedby=\"id-help\" name=\"pdId\" value={this.state.form.pdId} onChange={this.handleChange}/>\n                                <small id=\"id-help\" className=\"form-text text-muted\">Must be integer</small>\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-name\">Product Name</label> \n                                <input type=\"text\" className=\"form-control\" name=\"pdName\" value={this.state.form.pdName} onChange={this.handleChange} />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-pic\">Photo URL</label>\n                                <input type=\"text\" className=\"form-control\" name=\"pdUrl\" value={this.state.form.pdUrl} onChange={this.handleChange}/>\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-qty\">Qty</label> \n                                <input type=\"number\" className=\"form-control\" name=\"qty\" value={this.state.form.qty} onChange={this.handleChange} />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-price\">Price</label> \n                                <input type=\"number\" className=\"form-control\" name=\"price\" value={this.state.form.price} onChange={this.handleChange} />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"product-desc\">Description</label>          \n                                <input type=\"text\" className=\"form-control\" name=\"desc\" value={this.state.form.desc} onChange={this.handleChange}/>\n                            </div>\n                            <button className=\"btn btn-primary\" type=\"submit\">Add</button>\n                            <button className=\"btn btn-info ml-2\" onClick={this.updateProduct}>Update</button>\n                        </form>\n                    </div>\n                    <div className=\"col-6\">\n                        {pdList}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}